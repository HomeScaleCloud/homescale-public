apiVersion: v1
kind: Service
metadata:
  name: "{{ .Release.Name }}"
  namespace: argocd
  labels:
    app.homescale.cloud/name: "{{ .Release.Name }}"
  annotations:
    tailscale.com/hostname: {{ .Release.Name }}
    tailscale.com/proxy-group: ingress
    tailscale.com/tags: tag:app,tag:cluster-{{ .Values.global.cluster }},tag:region-{{.Values.global.region }}
spec:
  type: LoadBalancer
  loadBalancerClass: tailscale
  ports:
  - name: minecraft
    port: 25565
    targetPort: minecraft
    protocol: TCP
  selector:
    app: "{{ .Release.Name }}-minecraft"
